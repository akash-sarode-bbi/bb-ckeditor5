<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>CKEditor 5 – ACoMS build with Document Editor</title>

	<style>
		body {
			margin: 20px auto;
		}

		.editable-container-super {
			display: flex;
		}

		.editable-container,
		.toolbar-container {
			position: relative;
			border: 1px solid #ddd;
			background: #eee;
		}

		#sidebar {
			background: #EEE;
			width: 30%;
			padding: 10px;
		}

		.toolbar-container {
			padding: 1em;
		}

		.editable-container {
			padding: 2em;
			width: 70%;
		}

		.editable-container .ck-editor__editable {
			/* min-height: 19em; */
			padding: 2em;
			border: 1px #D3D3D3 solid;
			border-radius: var(--ck-border-radius);
			background: white;
			box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
		}

		.w-10 {
			width: 10% !important;
		}

		.w-20 {
			width: 20% !important;
		}

		.w-25 {
			width: 25% !important;
		}

		.w-45 {
			width: 45% !important;
		}

		.editor-container .ck.ck-editor__editable_inline {
			border: 1px solid hsla(0, 0%, 0%, 0.15);
			transition: background .5s ease-out;
			min-height: 6em;
			margin-bottom: 1em;
		}

		.word-container {
			display: flex;
			flex-direction: row;
			align-items: center;
		}

		.word-container-chart {
			margin-right: 1em;
		}

		.word-container-chart-circle {
			transform: rotate(-90deg);
			transform-origin: center;
		}

		.word-container-chart-characters {
			font-size: 13px;
			font-weight: bold;
		}

		.word-container-word-count {
			flex-grow: 1;
			opacity: .5;
		}

		.word-container-limit-close .word-container-chart-circle {
			stroke: hsl(30, 100%, 52%);
		}

		.word-container-limit-exceeded .ck.ck-editor__editable_inline {
			background: hsl(0, 100%, 97%);
		}

		.word-container-limit-exceeded .word-container-chart-circle {
			stroke: hsl(0, 100%, 52%);
		}

		.word-container-limit-exceeded .word-container-chart-characters {
			fill: hsl(0, 100%, 52%);
		}
	</style>
	<link rel="stylesheet" href="../../../node_modules/bootstrap/dist/css/bootstrap.min.css">
</head>

<body>
	<div class="container-fluid">
		<h1>CKEditor 5 – ACoMS build with Document Editor</h1>
		<div class="editor-container">
			<div id="presence-list-container"></div>
			<div class="toolbar-container"></div>


			<div class="editable-container-super">
				<div class="editable-container"></div>
				<div id="sidebar"></div>
			</div>

			<div class="word-container">
				<span class="word-container-word-count"></span>
				<svg class="word-container-chart" viewbox="0 0 40 40" width="40" height="40"
					xmlns="http://www.w3.org/2000/svg">
					<circle stroke="hsl(0, 0%, 93%)" stroke-width="3" fill="none" cx="20" cy="20" r="17" />
					<circle class="word-container-chart-circle" stroke="hsl(202, 92%, 59%)" stroke-width="3"
						stroke-dasharray="134,534" stroke-linecap="round" fill="none" cx="20" cy="20" r="17" />
					<text class="word-container-chart-characters" x="50%" y="50%" dominant-baseline="central"
						text-anchor="middle"></text>
				</svg>
			</div>
		</div>
	</div>

	<script src="../build/ckeditor.js"></script>
	<script>
		function createEditor( styleDefinitions ) {
			const editorData = "\n <!DOCTYPE html lang=\"EN\">\n <html> \n <head>\n\t<meta content=\"text\/html; charset=UTF-8\" http-equiv=\"Content-Type\" \/>\n\t<title>ENIH105<\/title>\n\t<meta content=\"width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=1\" name=\"viewport\" \/>\n <link charset=\"UTF-8\" href=\"ENIH105.css\" rel=\"STYLESHEET\" type=\"text\/css\" \/>\n <link charset=\"UTF-8\" href=\"HighLight.css\" rel=\"STYLESHEET\" type=\"text\/css\" \/>\n <script src=\"jquery-2.0.31.min.js\"><\/script>\n <script type=\"text\/javascript\" src=\"HighlightSearch.js\"><\/script>\n <\/head><body onload=\"_geturl1();\"><p class=\"h2\">Cause of HF<\/p>\n <p class=\"text\">In the United States, approximately 115 million people have hypertension, 100 million have obesity, 92 million have prediabetes, 26 million have diabetes, and 125 million have atherosclerotic CVD (<a href=\"ref_ENAS6600_18.0.0.0#sec_1\">1<\/a>). These\n are known risk factors with high relative risk and population attributable risk for development of HF. Therefore, a large proportion of the U.S. population can be categorized as being at-risk for HF or stage A HF. The common causes of HF include\n ischemic heart disease and myocardial infarction (MI), hypertension, and valvular heart disease (VHD). Other causes can include familial or genetic cardiomyopathies; amyloidosis; cardiotoxicity with cancer or other treatments or substance\n abuse such as alcohol, cocaine, or methamphetamine; tachycardia, right ventricular (RV) pacing or stress-induced cardiomyopathies; peripartum cardiomyopathy; myocarditis; autoimmune causes, sarcoidosis; iron overload, including hemochromatosis;\n and thyroid disease and other endocrine metabolic and nutritional causes (<span class=\"bold blue\">Table\u00a05<\/span>). Furthermore, with cardiac imaging and biomarkers, myocardial injury or cardiac maladaptive structural changes can be detected\n at earlier phases with a higher sensitivity, even in the absence of gross LV dysfunction or symptoms. With the coronavirus disease 2019 (COVID-19) pandemic, investigators are gaining better insights into infection and inflammation-related\n myocardial injury and myocarditis. With the increasing ability to detect myocardial injury and with an increasing awareness of cardiotoxicity and injury patterns including inflammation, pre-HF or stage B HF will likely continue to increase.\n Beyond classifications of EF and staging in HF, clinicians should seek the cause of HF because appropriate treatment may be determined by the cause (<span class=\"bold blue\">Table\u00a05<\/span>).<\/p>\n <table class=\"recomm-table\">\n <colgroup>\n <col width=\"64%\" \/>\n <col width=\"18%\" \/>\n <col width=\"18%\" \/>\n <\/colgroup>\n <thead>\n <tr>\n <th class=\"recomm-header1\" colspan=\"3\">\n <p class=\"table-title1\">Recommendations for Clinical Assessment: History and Physical Examination\n <\/p>\n\n <p class=\"table-title1\">Referenced studies that support the recommendations are summarized in the Online Data Supplements.<\/p>\n <\/th>\n <\/tr>\n <tr>\n <th class=\"recomm-header2\">\n <p class=\"table-title2\">Rec\u00adom\u00admen\u00adda\u00adtions<\/p>\n <\/th>\n <th class=\"recomm-header2\">\n <p class=\"table-title2-cent\"><a href=\"abbr_COR\">COR<\/a><\/p>\n <\/th>\n <th class=\"recomm-header2\">\n <p class=\"table-title2-cent\"><a href=\"abbr_LOE\">LOE<\/a><\/p>\n <\/th>\n <\/tr>\n<\/thead><tbody><tr>\n <td>\n <p class=\"listing-1\">1.In patients with HF, vital signs and evidence of clinical congestion should be assessed at each encounter to guide overall management, including adjustment of diuretics and other medications<\/span> (<a href=\"ref_ENAS6600_18.0.0.0#sec8\">1-6<\/a>)<\/p>\n <\/td>\n <td class=\"class1\">\n <p class=\"table-text\">1<\/p>\n <\/td>\n <td class=\"levelB\">\n <p class=\"table-text\">B-NR<\/p>\n <\/td>\n <\/tr>\n <tr>\n <td>\n <p class=\"listing-1\">2.In patients with symptomatic HF, clinical factors indicating the presence of advanced HF should be sought via the history and physical examination<\/span> (<a href=\"ref_ENAS6600_18.0.0.0#sec8\">7-12<\/a>)<\/p>\n <\/td>\n\n <td class=\"class1\">\n <p class=\"table-text\">1<\/p>\n <\/td>\n <td class=\"levelB\">\n <p class=\"table-text\">B-NR<\/p>\n <\/td>\n <\/tr>\n <tr>\n <td>\n <p class=\"listing-1\">3.In patients with cardiomyopathy, a 3-generation family history should be obtained or updated when assessing the cause of the cardiomyopathy to identify possible inherited disease (<a href=\"ref_ENAS6600_18.0.0.0#sec8\">13<\/a>,\n <a href=\"ref_ENAS6600_18.0.0.0#sec8\">14<\/a>).\n <\/p>\n <\/td>\n\n <td class=\"class1\">\n <p class=\"table-text\">1<\/p>\n <\/td>\n <td class=\"levelB\">\n <p class=\"table-text\">B-NR<\/p>\n <\/td>\n <\/tr>\n <tr>\n <td>\n\n <p class=\"listing-1\">4.In patients presenting with HF, a thorough history and physical examination should direct diagnostic strategies to uncover specific causes that may warrant disease-specific management (<a href=\"ref_ENAS6600_18.0.0.0#sec8\">15<\/a>,\n <a href=\"ref_ENAS6600_18.0.0.0#sec8\">16<\/a>).\n <\/p>\n <\/td>\n\n <td class=\"class1\">\n <p class=\"table-text\">1<\/p>\n <\/td>\n <td class=\"levelB\">\n <p class=\"table-text\">B-NR<\/p>\n <\/td>\n <\/tr>\n <tr>\n <td>\n\n <p class=\"listing-1\">5.In patients presenting with HF, a thorough history and physical examination should be obtained and performed to identify cardiac and noncardiac disorders, lifestyle and behavioral factors, and social determinants of health that\n might cause or accelerate the development or progression of HF.<\/p>\n <\/td>\n\n <td class=\"class1\">\n <p class=\"table-text\">1<\/p>\n <\/td>\n <td class=\"levelC\">\n <p class=\"table-text\">C-EO<\/p>\n <\/td>\n <\/tr>\n <\/tbody>\n <\/table>\n <div class=\"ref\">\n <p class=\"reference\">HF indicates heart failure; PVC, premature ventricular contraction; and RV, right ventricular.\n <\/p>\n <\/div>\n <\/body><\/html>";
			const maxCharacters = 9000;
			const container = document.querySelector('.editor-container');
			const progressCircle = document.querySelector('.word-container-chart-circle');
			const charactersBox = document.querySelector('.word-container-chart-characters');
			const wordsBox = document.querySelector('.word-container-word-count');
			const circleCircumference = Math.floor(2 * Math.PI * progressCircle.getAttribute('r'));

			const {
				CKEditorCS: Editor,
				EditorWatchdog
			} = Watchdog;

			// Create a watchdog for the given editor type.
			const watchdog = new EditorWatchdog(Editor);
			// Define a callback that will create an editor instance and return it.
			watchdog.setCreator((elementOrData, editorConfig) => {
				return Editor.
				create(elementOrData, editorConfig)
					.then(editor => {
						window.editor = editor;
						// remove all child nodes
						removeChilds(document.querySelector('.toolbar-container'));
						removeChilds(document.querySelector('.editable-container'));
						document.querySelector('.toolbar-container').appendChild(editor.ui.view.toolbar.element);
						document.querySelector('.editable-container').appendChild(editor.ui.view.editable.element);
						editor.execute('trackChanges');
						return editor;
					})
					.catch(error => {
						console.error('There was a problem initializing the editor.', error);
					});
			});

			editorConfig = {
				// toolbar: {shouldNotGroupWhenFull: true},
				wordCount: {
					onUpdate: stats => {
						const charactersProgress = stats.characters / maxCharacters * circleCircumference;
						const isLimitExceeded = stats.characters > maxCharacters;
						const isCloseToLimit = !isLimitExceeded && stats.characters > maxCharacters * .8;
						const circleDashArray = Math.min(charactersProgress, circleCircumference);
						// Set the stroke of the circle to show how many characters were typed.
						progressCircle.setAttribute('stroke-dasharray', `${ circleDashArray },${ circleCircumference }`);

						// Display the number of characters in the progress chart. When the limit is exceeded,
						// display how many characters should be removed.
						if (isLimitExceeded) {
							charactersBox.textContent = `-${ stats.characters - maxCharacters }`;
						} else {
							charactersBox.textContent = stats.characters;
						}

						wordsBox.textContent = `Words in the post: ${ stats.words }`;

						// If the content length is close to the character limit, add a CSS class to warn the user.
						container.classList.toggle('word-container-limit-close', isCloseToLimit);

						// If the character limit is exceeded, add a CSS class that makes the content's background red.
						container.classList.toggle('word-container-limit-exceeded', isLimitExceeded);
					}
				},
				cloudServices: {
					tokenUrl: 'https://82590.cke-cs.com/token/dev/9286b29bd61f974476d756299aad9e4eb224d9182d0d86ad89888e247151?limit=10 ',
					uploadUrl: 'https://82590.cke-cs.com/easyimage/upload/',
					webSocketUrl: 'wss://82590.cke-cs.com/ws'
				},
				collaboration: {
					channelId: "test-decoupled-editor-16-13"
				},
				sidebar: {
					container: document.querySelector('#sidebar')
				},
				presenceList: {
					container: document.querySelector('#presence-list-container')
				},
				link: {
					data: {
						toc: getTocList,
						abbreviation: gerAbbreviationList,
						reference: getReferenceList
					}
				},
				templates: [{
						'title': 'Arzneimittel pocket Table Template',
						'image': 'template2.gif',
						'description': 'A table template for Arzneimittel pocket.',
						'html': '<form name="fm"> <div class="ws-crossref"> <div class="paragraph">Sie&shy;he auch <a href="">Haupt&shy;ein&shy;trag</a> </div> </div> <table class="info"> <colgroup> <col class="item" /> <col class="itemvalue" /> </colgroup> <tbody> <tr> <td><b>HWZ</b></td> <td></td> </tr> </tbody> </table> <div class="head"> <div class="headline">Han&shy;dels&shy;na&shy;men, Ap&shy;pli&shy;ka&shy;ti&shy;ons&shy;for&shy;men</div> </div> <div class="detail"> <div class="paragraph"></div> </div> <div class="head"> <div class="fi_but"><a href="">FI </a></div> <div class="headline">In&shy;di&shy;ka&shy;tio&shy;nen, Do&shy;sie&shy;run&shy;gen</div> </div> <div class="detail"> <div class="paragraph"></div> </div> </form>'
					},
					{
						'title': 'Arzneimittel pocket DANI-RECHNER Table Template',
						'image': 'template2.gif',
						'description': 'A table template for  DANI-RECHNER of Arzneimittel pocket.',
						'html': '<form name="fm"> <table class="info"> <colgroup> <col class="item" /> <col class="itemvalue" /> <col class="item" /> <col class="itemvalue" /> </colgroup> <tbody> <tr> <td><b>Rp</b></td> <td>&nbsp;</td> <td><b>HWZ</b></td> <td>&nbsp;</td> </tr> <tr> <td><b>Q<font size="-8pt">0</font></b></td> <td>&nbsp;</td> <td><b>PPB</b></td> <td>&nbsp;</td> </tr> <tr> <td colspan="2"><a href="">DANI-RECH&shy;NER</a></td> <td colspan="2"><a href="">DANI-DATEN</a></td> </tr> <tr> <td><b>PRC</b></td> <td>&nbsp;</td> <td><b>Lact</b></td> <td>&nbsp;</td> </tr> </tbody> </table> <div class="gap">&nbsp;</div> <div class="head"> <div class="headline">Han&shy;dels&shy;na&shy;men, Ap&shy;pli&shy;ka&shy;ti&shy;ons&shy;for&shy;men</div> </div> <div class="detail"> <div class="paragraph">&nbsp;</div> </div> <div class="gap">&nbsp;</div> <div class="head"> <div class="fi_but"><a href="">FI </a></div> <div class="headline">In&shy;di&shy;ka&shy;tio&shy;nen, Do&shy;sie&shy;run&shy;gen</div> </div> <div class="detail"> <div class="paragraph">&nbsp;</div> </div> <div class="gap">&nbsp;</div> <div class="head"><!--<a href=""><div class="fi_but">FI</div></a>--> <div class="headline">Wirk&shy;me&shy;cha&shy;nis&shy;men, Wir&shy;kun&shy;gen</div> </div> <div class="detail"> <div class="paragraph">&nbsp;</div> </div> <div class="gap">&nbsp;</div> <div class="head"> <div class="fi_but"><a href="">FI </a></div> <div class="headline">Un&shy;er&shy;w&uuml;nsch&shy;te Wir&shy;kun&shy;gen</div> </div> <div class="detail"> <div class="paragraph">&nbsp;</div> </div> <div class="gap">&nbsp;</div> <div class="head"> <div class="fi_but"><a href="">FI </a></div> <div class="headline">Kon&shy;tra&shy;in&shy;di&shy;ka&shy;tio&shy;nen</div> </div> <div class="detail"> <div class="paragraph">&nbsp;</div> </div> </form>'
					},
					{
						'title': 'ESC Recommendation Table Template',
						'image': 'template3.gif',
						'description': 'A table template for ESC recommendation.',
						'html': '<table class="table"> <colgroup><col width="64%" /> <col width="18%" />  <col width="18%" /> </colgroup> <tbody> <tr> <th class="table-header1" colspan="3">  <p class="table-title1">Rec&shy;om&shy;men&shy;da&shy;tions for <-- enter here specific name --></p> </th> </tr>   <tr>   <th class="table-header2">  <p class="table-title2">Rec&shy;om&shy;men&shy;da&shy;tions</p> </th> <th class="table-header2"> <p class="table-title2-cent">Class<span class="text-sup">a</span></p></th>   <th class="table-header2"> <p class="table-title2-cent">Lev&shy;el<span class="text-sup">b</span></p> </th> </tr>  <tr>  <th class="table-header3" colspan="3">    <p class="table-title3">&nbsp;</p> </th> </tr>         <tr>    <td class="col-gray2">    <p class="table-text">&nbsp;</p>  </td>  <td class="class-i">  <p>I</p>  </td>    <td class="level-a">   <p>A</p>    </td> </tr>   <tr>   <td class="col-gray2">   <p class="table-text">&nbsp;</p>  </td>  <td class="class-ii-a">     <p>IIa</p>  </td>  <td class="level-b">   <p>B</p>   </td>  </tr> <tr>   <td class="col-gray2"><p class="table-text">&nbsp;</p>    </td>    <td class="class-ii-b">    <p>IIb</p>    </td>    <td class="level-c">    <p>C</p>    </td>   </tr>  <tr>    <td class="col-gray2">    <p class="table-text">&nbsp;</p>    </td>    <td class="class-iii">    <p>III</p>    </td>    <td class="level-a">                <p>A</p>  </td>  </tr> </tbody>    </table>'
					},
					{
						'title': 'AHA Recommendation Table Template',
						'image': 'template3.gif',
						'description': 'A table template for AHA recommendation.',
						'html': '<table class="recomm-table"> <colgroup> <col width="64%" /> <col width="18%" /> <col width="18%" /> </colgroup> <tbody> <tr> <th class="recomm-header1" colspan="3"> <p class="table-title1">Rec&shy;om&shy;men&shy;da&shy;tions for&nbsp;&lt;-- enter here specific name --&gt;</p> </th> </tr> <tr> <td class="recomm-header2"> <p class="table-title2">Rec&shy;om&shy;men&shy;da&shy;tion</p> </td> <td class="recomm-header2"> <p class="table-title2-cent"><a href="abbr_COR">COR</a></p> </td> <td class="recomm-header2"> <p class="table-title2-cent"><a href="abbr_LOE">LOE</a></p> </td> </tr> <tr> <td> <p >&nbsp;</p> </td> <td class="class1"> <p class="text">I</p> </td> <td class="levelA"> <p class="text">A</p> </td> </tr> <tr> <td> <p >&nbsp;</p> </td> <td class="class2a"> <p class="text">IIa</p> </td> <td class="levelB"> <p class="text">B</p> </td> </tr> <tr> <td> <p >&nbsp;</p> </td> <td class="class2b"> <p class="text">IIb</p> </td> <td class="levelC"> <p class="text">C</p> </td> </tr> <tr> <td>&nbsp;</td> <td class="class3"><span class="text">III</span></td> <td class="levelC"><span class="text">C</span></td> </tr> </tbody> </table>'
					},
					{
						'title': 'ACC Recommendation Table Template',
						'image': 'template3.gif',
						'description': 'A table template for ACC recommendation.',
						'html': '<table class="table"> <colgroup> <col width="60%" /> <col width="20%" /> <col width="20%" /> </colgroup> <tbody> <tr> <th class="table-header1" colspan="3"> <p class="table-title1"><!---Sec&shy;tion 3.5.--->Rec&shy;om&shy;men&shy;da&shy;tions for&nbsp;&lt;-- enter here specific name --&gt;</p> </th> </tr> <tr> <th class="table-header2"> <p class="table-title2">Rec&shy;om&shy;men&shy;da&shy;tions</p> </th> <th class="table-header2"> <p class="table-title2-cent"><a href="abbr_COR">COR</a></p> </th> <th class="table-header2"> <p class="table-title2-cent"><a href="abbr_LOE">LOE</a></p> </th> </tr> <tr> <td> <p >&nbsp;</p> </td> <td class="class-1"> <p class="table-text-cent">I</p> </td> <td class="class-a"> <p class="table-text-cent">A</p> </td> </tr> <tr> <td> <p >&nbsp;</p> </td> <td class="class-2a"> <p class="table-text-cent">IIa</p> </td> <td class="class-b"> <p class="table-text-cent">B</p> </td> </tr> <tr> <td> <p >&nbsp;</p> </td> <td class="class-2b"> <p class="table-text-cent">IIa</p> </td> <td class="class-c"> <p class="table-text-cent">C</p> </td> </tr> <tr> <td> <p >&nbsp;</p> </td> <td class="class-3"> <p class="table-text-cent">III</p> </td> <td class="class-b"> <p class="table-text-cent">B</p> </td> </tr> </tbody> </table>'
					},
					{
						'title': 'ESVS Recommendation Table Template',
						'image': 'template3.gif',
						'description': 'A table template for ESVS recommendation.',
						'html': '<table class="table esvs_recommendation_table_template"> <colgroup> <col width="55%" /> <col width="14%" /> <col width="14%" /> <col width="17%" /> </colgroup> <tbody> <tr> <td class="col-gray1"> <p class="table-text"><span class="bold">Rec&shy;om&shy;men&shy;da&shy;tion</span></p> </td> <td class="col-gray1"> <p class="table-title2-cent"><a href="abbr_Cor">Cor</a></p> </td> <td class="col-gray1"> <p class="table-title2-cent"><a href="abbr_Loe">Loe</a></p> </td> <td class="col-gray1"> <p class="table-title2-cent"><a href="abbr_Ref">Ref</a></p> </td> </tr> <tr> <td class="col-gray1"> <p class="table-text">&nbsp;</p> </td> <td class="class-i"> <p class="text">I</p> </td> <td class="level-c"> <p class="text">C</p> </td> <td class="col-gray1"> <p class="text-cent"><a href="ref_no">Ref No.</a></p> </td> </tr> </tbody> </table>'
					}
				],
				style: {
					definitions: styleDefinitions
				}
			};

			// Create an editor instance and start watching it.
			watchdog.create(editorData, editorConfig);
		}

		
		const removeChilds = (parent) => {
			while (parent.lastChild) {
				parent.removeChild(parent.lastChild);
			}
		};

		function getTocList() {
			const fetchOptions = {
				method: 'get',
				mode: 'no-cors'
			};
			return fetch(`http://localhost:8888/acoms/media/data/guideline/ENAS103/ENAS103_TOC.json`, fetchOptions)
				.then(response => response.json());
		}

		function gerAbbreviationList() {
			const fetchOptions = {
				method: 'get',
				mode: 'no-cors'
			};
			return fetch(`http://localhost:8888/acoms/media/data/guideline/ENAS103/Abbreviations.json`, fetchOptions)
				.then(response => response.json());
		}

		function getReferenceList() {
			const fetchOptions = {
				method: 'get',
				mode: 'no-cors'
			};
			return fetch(
					`http://localhost:8888/acoms/controllers/controller.guidelineOperations.php?operationType=getGuidelineReferenceList&guidelineId=112`,
					fetchOptions)
				.then(response => response.json());
		}

		async function getStyleItemList( ) {
			const validSelectors = /\w+\.\w+/;
			const globalRegex = new RegExp( '\\:{1,2}[^\\s]*' );
			appendStyle();
			let data = [];
			const sheetArray = [ ...document.styleSheets[ document.styleSheets.length - 1 ].cssRules ];

			const sheet = sheetArray.filter(
				item => 'selectorText' in item && item.selectorText != '' &&
				validSelectors.test( item.selectorText ) &&
				// escape selectors splitting the elements, leave only the class selector (.)
				!( /(,|>|\+|~)/.test( item.selectorText ) ) &&
				// escape attribute selectors: table[border="0"]
				!( /\[[^\]]*/.test( item.selectorText ) ) &&
				// escape Ids: div#main
				!( /#[^\s]*/.test( item.selectorText ) ) &&
				// escape pseudo-selectors and pseudo-elements: :hover :nth-child(2n+1) ::before
				!( globalRegex.test( item.selectorText ) )
			).map( item => {
				item.selectorText = item.selectorText.replace('.ck-content ', '');
				return item;
			} );

			const cssItems = sheet.filter( item => /^((\w|-)+)\.(\w+)/.test( item.selectorText ) )
				.map( item => {
					const match = item.selectorText.match( /^((\w|-)+)\.((\w|-)+)/ );
					return {
						name: match ? capitalize(match[ 3 ]) : '',
						element: match ? match[ 1 ] : '',
						classes: [match ? match[ 3 ] : '' ]
					}
				} );
			return cssItems;
		}

		function appendStyle() {
			try {
				// Get HTML head element
				var head = document.getElementsByTagName('HEAD')[0];
 
				// Create new link Element
				var link = document.createElement('link');

				// set the attributes for link element
				link.rel = 'stylesheet';

				link.type = 'text/css';

				link.href = 'http://localhost:8888/acoms/media/include/ckeditor/media/css/ckeditor.css';

				// Append link element to HTML head
				head.appendChild(link);
			} catch ( error ) {
				console.log( error );
			}
		}

		async function loadEditor() {
			const styleItem = await getStyleItemList( );
			console.log(styleItem);
			createEditor( styleItem );
		}
		
		function capitalize(input) {  
			return input.toLowerCase().split(' ').map(s => s.charAt(0).toUpperCase() + s.substring(1)).join(' ');  
		} 

		loadEditor();
	</script>
</body>

</html>
